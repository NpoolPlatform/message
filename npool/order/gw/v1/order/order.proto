syntax = "proto3";

package order.gateway.order1.v1;

option go_package = "github.com/NpoolPlatform/message/npool/order/gw/v1/order";

import "npool/order/mgr/v1/order/state/state.proto";
import "google/api/annotations.proto";
import "google/protobuf/empty.proto";
import "npool/npool.proto";

// Service Name
service Gateway {
    rpc CreateOrder (CreateOrderRequest) returns (CreateOrderResponse) {
        option (google.api.http) = {
            post: "/v1/create/order"
            body: "*"
        };
    }

    rpc GetOrders (GetOrdersRequest) returns (GetOrdersResponse) {
        option (google.api.http) = {
            post: "/v1/get/orders"
            body: "*"
        };
    }

    // Admin apis

    rpc GetUserOrders (GetUserOrdersRequest) returns (GetUserOrdersResponse) {
        option (google.api.http) = {
            post: "/v1/get/user/orders"
            body: "*"
        };
    }

    rpc GetAppUserOrders (GetAppUserOrdersRequest) returns (GetAppUserOrdersResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/user/orders"
            body: "*"
        };
    }
}

message Order {
    string ID                     = 10;

    string ParentOrderID          = 20;
    string ParentOrderGoodID      = 30;
    string ParentOrderGoodName    = 40;

    string UserID                 = 50;
    string EmailAddress           = 60;
    string PhoneNO                = 70;

    string CoinTypeID             = 80;
    string CoinName               = 90;
    string CoinLogo               = 100;
    string CoinUnit               = 110;

    string GoodID                 = 120;
    string GoodName               = 130;
    uint32 Units                  = 140;

    string PaymentID              = 150;
    string PaymentCoinTypeID      = 160;
    string PaymentCoinName        = 170;
    string PaymentCoinLogo        = 180;
    string PaymentCoinUSDCurrency = 190;
    string PaymentLiveUSDCurrency = 200;
    string PaymentLocalUSDCurrency = 210;
    string PaymentAddress         = 220;
    string PaymentAmount          = 230;
    string PayWithBalanceAmount   = 240;
    bool   PayWithParent          = 250;

    string FixAmountID            = 260;
    string FixAmountName          = 270;
    string FixAmountAmount        = 280;

    string DiscountID             = 290;
    string DiscountName           = 300;
    uint32 DiscountPercent        = 310;

    string SpecialOfferID         = 320;
    string SpecialOfferAmount     = 330;

    uint32 CreatedAt              = 340;
    uint32 PaidAt                 = 350;

    string State                  = 360;
    string OrderType              = 370;

    uint32 Start                  = 380;
    uint32 End                    = 390;
}

message CreateOrderRequest {
    string          AppID                = 10;
    string          UserID               = 20;
    string          GoodID               = 30;
    uint32          Units                = 40;
    string          PaymentCoinID        = 50;
    optional string ParentOrderID        = 60;
    optional string PayWithBalanceAmount = 70;
    optional string FixAmountID          = 80;
    optional string DiscountID           = 90;
    optional string SpecialOfferID       = 100;
    string          OrderType            = 110;
}

message CreateOrderResponse {
    Order Info = 10;
}

message GetOrdersRequest {
    string AppID   = 10;
    string UserID  = 20;
    int32  Offset  = 30;
    int32  Limit   = 40;
}

message GetOrdersResponse {
    repeated Order Infos = 10;
}

message GetUserOrdersRequest {
    string AppID   = 10;
    string TargetUserID  = 20;
    int32  Offset  = 30;
    int32  Limit   = 40;
}

message GetUserOrdersResponse {
    repeated Order Infos = 10;
}

message GetAppUserOrdersRequest {
    string TargetAppID   = 10;
    string TargetUserID  = 20;
    int32  Offset  = 30;
    int32  Limit   = 40;
}

message GetAppUserOrdersResponse {
    repeated Order Infos = 10;
}
