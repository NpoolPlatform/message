syntax = "proto3";

package g11n.middleware.message1.v1;

option go_package = "github.com/NpoolPlatform/message/npool/g11n/mw/v1/message";

import "google/protobuf/empty.proto";
import "npool/npool.proto";
import "npool/g11n/mgr/v1/message/message.proto";

// Service Name
service Middleware {
    rpc CreateMessage     (CreateMessageRequest)     returns (CreateMessageResponse)     {}
    rpc CreateMessages    (CreateMessagesRequest)    returns (CreateMessagesResponse)    {}
    rpc UpdateMessage     (UpdateMessageRequest)     returns (UpdateMessageResponse)     {}
    rpc GetMessages       (GetMessagesRequest)       returns (GetMessagesResponse)       {}
    rpc DeleteMessage     (DeleteMessageRequest)     returns (DeleteMessageResponse)     {}
}

message Message {
    // @inject_tag: sql:"id"
    string ID         = 10;
    // @inject_tag: sql:"app_id"
    string AppID      = 20;
    // @inject_tag: sql:"lang_id"
    string LangID     = 30;
    // @inject_tag: sql:"lang"
    string Lang       = 40;
    // @inject_tag: sql:"message_id"
    string MessageID  = 50;
    // @inject_tag: sql:"message"
    string Message    = 60;
    // @inject_tag: sql:"get_index"
    uint32 GetIndex   = 70;
    // @inject_tag: sql:"disabled"
    bool   Disabled   = 80;
}

message CreateMessageRequest {
    g11n.manager.message1.v1.MessageReq Info = 10;
}

message CreateMessageResponse {
    Message Info = 10;
}

message CreateMessagesRequest {
    repeated g11n.manager.message1.v1.MessageReq Infos = 10;
}

message CreateMessagesResponse {
    repeated Message Infos = 10;
}

message UpdateMessageRequest {
    g11n.manager.message1.v1.MessageReq Info = 10;
}

message UpdateMessageResponse {
    Message Info = 10;
}

message GetMessagesRequest {
    g11n.manager.message1.v1.Conds Conds  = 10;
    int32 Offset = 20;
    int32 Limit  = 30;
}

message GetMessagesResponse {
    repeated Message Infos = 10;
    uint32           Total = 20;
}

message DeleteMessageRequest {
    string ID = 10;
}

message DeleteMessageResponse {
    Message Info = 10;
}

