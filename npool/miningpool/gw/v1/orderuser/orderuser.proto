syntax = "proto3";

package miningpool.gateway.orderuser.v1;

option go_package = "github.com/NpoolPlatform/message/npool/miningpool/gw/v1/orderuser";

import "google/api/annotations.proto";;
import "npool/miningpool/mw/v1/orderuser/orderuser.proto";

// Service Name
service Gateway {
    rpc GetOrderUser        (GetOrderUserRequest)          returns (GetOrderUserResponse)         {
        option (google.api.http) = {
            post: "/v1/get/orderuser"
            body: "*"
        };
    }
    rpc GetOrderUsersByOrder  (GetOrderUsersByOrderRequest) returns (GetOrderUsersByOrderResponse) {
        option (google.api.http) = {
            post: "/v1/get/orderusers/by/order"
            body: "*"
        };
    }
    rpc SetupRevenueAddress (SetupRevenueAddressRequest)   returns (SetupRevenueAddressResponse)  {
        option (google.api.http) = {
            post: "/v1/setup/revenueaddress"
            body: "*"
        };
    }
    rpc SetupAutoPay        (SetupAutoPayRequest)          returns (SetupAutoPayResponse)         {
        option (google.api.http) = {
            post: "/v1/setup/autopay"
            body: "*"
        };
    }
}

message GetOrderUserRequest {
    string EntID = 10;
}

message GetOrderUserResponse {
    miningpool.middleware.orderuser.v1.OrderUser Info = 10;
}

message GetOrderUsersByOrderRequest {
    string OrderID  = 10;
    int32 Offset = 20;
    int32 Limit  = 30;
}

message GetOrderUsersByOrderResponse {
    repeated miningpool.middleware.orderuser.v1.OrderUser Infos = 10;
    uint32      Total = 20;
}

message SetupRevenueAddressRequest{
    string EntID          = 10;
    string RevenueAddress = 20;
}

message SetupRevenueAddressResponse{
    miningpool.middleware.orderuser.v1.OrderUser Info = 10;
}

message SetupAutoPayRequest{
    string EntID      = 10;
    bool   AutoPay = 20;
}

message SetupAutoPayResponse{
    miningpool.middleware.orderuser.v1.OrderUser Info = 10;
}