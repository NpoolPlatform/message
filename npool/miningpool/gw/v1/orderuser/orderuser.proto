syntax = "proto3";

package miningpool.gateway.orderuser.v1;

option go_package = "github.com/NpoolPlatform/message/npool/miningpool/gw/v1/orderuser";

import "google/api/annotations.proto";;
import "npool/basetypes/miningpool/v1/enums.proto";

// Service Name
service Gateway {
    rpc GetOrderUser        (GetOrderUserRequest)          returns (GetOrderUserResponse)         {
        option (google.api.http) = {
            post: "/v1/get/orderuser"
            body: "*"
        };
    }
    rpc GetOrderUsersByOrder  (GetOrderUsersByOrderRequest) returns (GetOrderUsersByOrderResponse) {
        option (google.api.http) = {
            post: "/v1/get/orderusers/by/order"
            body: "*"
        };
    }
    rpc SetupRevenueAddress (SetupRevenueAddressRequest)   returns (SetupRevenueAddressResponse)  {
        option (google.api.http) = {
            post: "/v1/setup/revenueaddress"
            body: "*"
        };
    }
    rpc SetupAutoPay        (SetupAutoPayRequest)          returns (SetupAutoPayResponse)         {
        option (google.api.http) = {
            post: "/v1/setup/autopay"
            body: "*"
        };
    }
}

message OrderUser {
    uint32               ID                = 10;
    string               EntID             = 20;
    string               Name              = 30;
    string               RootUserID        = 40;
    string               GoodUserID        = 50;
    string               OrderID           = 60;
    basetypes.miningpool.v1.MiningpoolType MiningpoolType = 70;
    basetypes.miningpool.v1.CoinType CoinType = 80;
    float                Proportion        = 90;
    string               RevenueAddress    = 100;
    string               ReadPageLink      = 110;
    bool                 AutoPay           = 120;
    uint32               CreatedAt         = 130;
    uint32               UpdatedAt         = 140;
}


message GetOrderUserRequest {
    string EntID = 10;
}

message GetOrderUserResponse {
    OrderUser Info = 10;
}

message GetOrderUsersByOrderRequest {
    string OrderID  = 10;
    int32 Offset = 20;
    int32 Limit  = 30;
}

message GetOrderUsersByOrderResponse {
    repeated OrderUser Infos = 10;
    uint32      Total = 20;
}

message SetupRevenueAddressRequest{
    string EntID          = 10;
    string RevenueAddress = 20;
}

message SetupRevenueAddressResponse{
    OrderUser Info = 10;
}

message SetupAutoPayRequest{
    string EntID      = 10;
    bool   AutoPay = 20;
}

message SetupAutoPayResponse{
    OrderUser Info = 10;
}