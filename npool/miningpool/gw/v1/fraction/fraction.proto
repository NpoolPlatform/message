syntax = "proto3";

package miningpool.gateway.fraction.v1;

option go_package = "github.com/NpoolPlatform/message/npool/miningpool/gw/v1/fraction";

import "google/api/annotations.proto";;
import "npool/basetypes/miningpool/v1/enums.proto";

// Service Name  
service Middleware {
    rpc CreateFraction     (CreateFractionRequest)   returns (CreateFractionResponse)    {
        option (google.api.http) = {
            post: "/v1/create/fraction"
            body: "*"
        };
    }
    rpc GetFraction        (GetFractionRequest)      returns (GetFractionResponse)       {
        option (google.api.http) = {
            post: "/v1/get/fraction"
            body: "*"
        };
    }
    rpc GetFractions       (GetOrderFractionsRequest)     returns (GetOrderFractionsResponse)      {
        option (google.api.http) = {
            post: "/v1/get/fractions"
            body: "*"
        };
    }
}

message Fraction {
    optional uint32                                   ID                 = 10;
    optional string                                   EntID              = 20;
    optional string                                   AppID              = 30;
    optional string                                   UserID             = 40;
    optional string                                   OrderUserID        = 50;
    optional basetypes.miningpool.v1.WithdrawState    WithdrawState      = 60;
    optional uint32                                   WithdrawTime       = 70;
    optional uint32                                   PayTime            = 80;
    optional string                                   Msg                = 90;
    uint32                                            CreatedAt          = 100;
    uint32                                            UpdatedAt          = 110;
}

message CreateFractionRequest {
    string   EntID         = 10;
    string   AppID         = 20;
    string   UserID        = 30;
    string   OrderUserID   = 40;
}

message CreateFractionResponse {
    Fraction Info = 10;
}

message GetFractionRequest {
    string   EntID         = 10;
    string   AppID         = 20;
    string   UserID        = 30;
}

message GetFractionResponse {
    Fraction Info = 10;
}

message GetOrderFractionsRequest {
    string   EntID         = 10;
    string   AppID         = 20;
    string   UserID        = 30;
    string   OrderUserID   = 40;
    int32    Offset        = 50;
    int32    Limit         = 60;
}

message GetOrderFractionsResponse {
    repeated Fraction Infos = 10;
    uint32      Total = 20;
}