syntax = "proto3";

package account.middleware.orderaccount.v1;

option go_package = "github.com/NpoolPlatform/message/npool/account/mw/v1/orderaccount";

import "google/api/annotations.proto";
import "npool/basetypes/v1/conds.proto";
import "npool/basetypes/v1/accountusedfor.proto";

// Service Name
service Middleware {
  rpc CreateOrderAccount(CreateOrderAccountRequest) returns (CreateOrderAccountResponse) {}
  rpc GetOrderAccount(GetOrderAccountRequest) returns (GetOrderAccountResponse) {}
  rpc GetOrderAccounts(GetOrderAccountsRequest) returns (GetOrderAccountsResponse) {}
  rpc ExistOrderAccount(ExistOrderAccountRequest) returns (ExistOrderAccountResponse) {}
  rpc ExistOrderAccountConds(ExistOrderAccountCondsRequest)
      returns (ExistOrderAccountCondsResponse) {}
  rpc DeleteOrderAccount(DeleteOrderAccountRequest) returns (DeleteOrderAccountResponse) {
    option (google.api.http) = {
      post : "/v1/orderaccount_DeleteOrderAccount"
      body : "*"
    };
  }
}

message OrderAccountReq {
  optional string EntID = 10;
  optional string AppID = 20;
  optional string UserID = 30;
  optional string CoinTypeID = 40;
  optional string Address = 50;
  optional basetypes.v1.AccountUsedFor UsedFor = 60;
}

message OrderAccount {
  // @inject_tag: sql:"id"
  uint32 ID = 10;
  // @inject_tag: sql:"ent_id"
  string EntID = 20;
  // @inject_tag: sql:"app_id"
  string AppID = 30;
  // @inject_tag: sql:"user_id"
  string UserID = 40;
  // @inject_tag: sql:"coin_type_id"
  string CoinTypeID = 50;
  // @inject_tag: sql:"address"
  string Address = 60;
  // @inject_tag: sql:"used_for"
  string UsedForStr = 69;
  basetypes.v1.AccountUsedFor UsedFor = 70;
  // @inject_tag: sql:"created_at"
  uint32 CreatedAt = 1000; 
  // @inject_tag: sql:"updated_at"
  uint32 UpdatedAt = 1010;
}

message Conds {
  optional basetypes.v1.Uint32Val ID = 10;
  optional basetypes.v1.StringVal EntID = 20;
  optional basetypes.v1.StringVal AppID = 30;
  optional basetypes.v1.StringVal UserID = 40;
  optional basetypes.v1.StringVal CoinTypeID = 50;
  optional basetypes.v1.StringVal Address = 60;
  optional basetypes.v1.StringVal UsedFor = 70;
  optional basetypes.v1.Uint32Val CreatedAt = 100;
  optional basetypes.v1.StringSliceVal EntIDs = 110;
}

message CreateOrderAccountRequest { OrderAccountReq Info = 10; }

message CreateOrderAccountResponse { OrderAccount Info = 10; }

message GetOrderAccountRequest { string EntID = 10; }

message GetOrderAccountResponse { OrderAccount Info = 10; }

message GetOrderAccountsRequest {
  Conds Conds = 10;
  int32 Offset = 20;
  int32 Limit = 30;
}

message GetOrderAccountsResponse {
  repeated OrderAccount Infos = 10;
  uint32 Total = 20;
}

message ExistOrderAccountRequest { string EntID = 10; }

message ExistOrderAccountResponse { bool Info = 10; }

message ExistOrderAccountCondsRequest { Conds Conds = 10; }

message ExistOrderAccountCondsResponse { bool Info = 10; }

message DeleteOrderAccountRequest { OrderAccountReq Info = 10; }

message DeleteOrderAccountResponse { OrderAccount Info = 10; }