syntax = "proto3";

package ledger.middleware.ledger1.v1;

option go_package = "github.com/NpoolPlatform/message/npool/ledger/mw/v1/ledger";

import "npool/ledger/mgr/v1/ledger/general/general.proto";
import "npool/ledger/mgr/v1/ledger/detail/detail.proto";
import "npool/ledger/mgr/v1/ledger/withdraw/withdraw.proto";
import "google/api/annotations.proto";
import "google/protobuf/empty.proto";
import "npool/npool.proto";

// Service Name
service Middleware {
    rpc GetIntervalGenerals       (GetIntervalGeneralsRequest)       returns (GetIntervalGeneralsResponse)  {}
    rpc GetIntervalDetails        (GetIntervalDetailsRequest)        returns (GetIntervalDetailsResponse)   {}
    rpc GetIntervalProfits        (GetIntervalProfitsRequest)        returns (GetIntervalProfitsResponse)   {}

    rpc BookKeeping               (BookKeepingRequest)               returns (BookKeepingResponse)          {}
    rpc LockBalance               (LockBalanceRequest)               returns (LockBalanceResponse)          {}
    rpc UnlockBalance             (UnlockBalanceRequest)             returns (UnlockBalanceResponse)        {}

    rpc FinalPayment              (FinalPaymentRequest)              returns (FinalPaymentResponse)         {}
    rpc UpdateWithdraw            (UpdateWithdrawRequest)            returns (UpdateWithdrawResponse)       {}
}

message GetIntervalGeneralsRequest {
    string AppID   = 10;
    string UserID  = 20;
    uint32 Start   = 30;
    uint32 End     = 40;
    int32  Offset  = 50;
    int32  Limit   = 60;
}

message GetIntervalGeneralsResponse {
    repeated ledger.manager.ledger.general.v1.General Infos = 10;
    uint32                                            Total = 20;
}

message GetIntervalDetailsRequest {
    string AppID   = 10;
    string UserID  = 20;
    uint32 Start   = 30;
    uint32 End     = 40;
    int32  Offset  = 50;
    int32  Limit   = 60;
}

message GetIntervalDetailsResponse {
    repeated ledger.manager.ledger.detail.v1.Detail Infos = 10;
    uint32                                          Total = 20;
}

message GetIntervalProfitsRequest {
    string AppID   = 10;
    string UserID  = 20;
    uint32 Start   = 30;
    uint32 End     = 40;
    int32  Offset  = 50;
    int32  Limit   = 60;
}

message GetIntervalProfitsResponse {
    repeated ledger.manager.ledger.detail.v1.Detail Infos = 10;
    uint32                                          Total = 20;
}

message BookKeepingRequest {
    ledger.manager.ledger.detail.v1.DetailReq Info = 10;
}

message BookKeepingResponse {
}

message LockBalanceRequest {
    string AppID       = 10;
    string UserID      = 20;
    string CoinTypeID  = 30;
    string Amount      = 40;
}

message LockBalanceResponse {
}

message UnlockBalanceRequest {
    string AppID                                        = 10;
    string UserID                                       = 20;
    string CoinTypeID                                   = 30;
    string Unlocked                                     = 40;
    string Outcoming                                    = 50;
    // Only Payment or Withdrawal
    ledger.manager.ledger.detail.v1.IOSubType IOSubType = 60;
    string IOExtra                                      = 70;
}

message UnlockBalanceResponse {
}

message FinalPaymentRequest {
    repeated ledger.manager.ledger.detail.v1.DetailReq Infos = 10;
}

message FinalPaymentResponse {
}

message UpdateWithdrawRequest {
    ledger.manager.ledger.withdraw.v1.WithdrawReq Info = 10;
}

message UpdateWithdrawResponse {
    ledger.manager.ledger.withdraw.v1.Withdraw Info = 10;
}


