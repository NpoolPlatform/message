syntax = "proto3";

package good.gateway.subgood.v1;

option go_package = "github.com/NpoolPlatform/message/npool/good/gw/v1/subgood";

import "npool/good/mgr/v1/subgood/subgood.proto";
import "google/api/annotations.proto";;

// Service Name
service Gateway {
    rpc CreateSubGood(CreateSubGoodRequest) returns (CreateSubGoodResponse) {
        option (google.api.http) = {
            post: "/v1/create/subgood"
            body: "*"
        };
    }

    rpc CreateAppSubGood(CreateAppSubGoodRequest) returns (CreateAppSubGoodResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/subgood"
            body: "*"
        };
    }

    rpc UpdateSubGood(UpdateSubGoodRequest) returns (UpdateSubGoodResponse) {
        option (google.api.http) = {
            post: "/v1/update/subgood"
            body: "*"
        };
    }

    rpc UpdateAppSubGood(UpdateAppSubGoodRequest) returns (UpdateAppSubGoodResponse) {
        option (google.api.http) = {
            post: "/v1/update/app/subgood"
            body: "*"
        };
    }

    rpc GetSubGoods(GetSubGoodsRequest) returns (GetSubGoodsResponse) {
        option (google.api.http) = {
            post: "/v1/get/subgoods"
            body: "*"
        };
    }

    rpc GetAppSubGoods(GetAppSubGoodsRequest) returns (GetAppSubGoodsResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/subgoods"
            body: "*"
        };
    }
}

message SubGood {
    string ID           = 10;
    string AppID        = 20;
    string MainGoodID   = 30;
    string MainGoodName = 40;
    string SubGoodID    = 50;
    string SubGoodName  = 60;
    bool   Must         = 70;
    bool   Commission   = 80;
    uint32 CreatedAt    = 90;
    uint32 UpdatedAt    = 100;
}

message CreateSubGoodRequest {
    string AppID       = 10;
    string MainGoodID  = 20;
    string SubGoodID   = 30;
    bool   Must        = 40;
    bool   Commission  = 50;
}

message CreateSubGoodResponse {
    SubGood Info = 10;
}

message CreateAppSubGoodRequest {
    string TargetAppID = 10;
    string MainGoodID  = 20;
    string SubGoodID   = 30;
    bool   Must        = 40;
    bool   Commission  = 50;
}

message CreateAppSubGoodResponse {
    SubGood Info = 10;
}

message UpdateSubGoodRequest {
    string          ID          = 10;
    string          AppID       = 20;
    optional string SubGoodID   = 30;
    optional bool   Must        = 40;
    optional bool   Commission  = 50;
}

message UpdateSubGoodResponse {
    SubGood Info = 10;
}

message UpdateAppSubGoodRequest {
    string          ID          = 10;
    string          TargetAppID = 20;
    optional string SubGoodID   = 30;
    optional bool   Must        = 40;
    optional bool   Commission  = 50;
}

message UpdateAppSubGoodResponse {
    SubGood Info = 10;
}

message GetSubGoodsRequest {
    string AppID  = 10;
    int32  Offset = 20;
    int32  Limit  = 30;
}

message GetSubGoodsResponse {
    repeated SubGood Infos = 10;
    uint32           Total = 20;
}

message GetAppSubGoodsRequest {
    string TargetAppID = 10;
    int32  Offset      = 20;
    int32  Limit       = 30;
}

message GetAppSubGoodsResponse {
    repeated SubGood Infos = 10;
    uint32           Total = 20;
}