syntax = "proto3";

package good.gateway.promotion.v1;

option go_package = "github.com/NpoolPlatform/message/npool/good/gw/v1/promotion";

import "google/api/annotations.proto";
import "npool/good/gw/v1/appgood/appgood.proto";
import "npool/good/gw/v1/good/good.proto";

;

// Service Name
service Gateway {
    rpc CreatePromotion(CreatePromotionRequest) returns (CreatePromotionResponse) {
        option (google.api.http) = {
            post: "/v1/create/promotion"
            body: "*"
        };
    }

    rpc CreateAppPromotion(CreateAppPromotionRequest) returns (CreateAppPromotionResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/promotion"
            body: "*"
        };
    }

    rpc UpdatePromotion(UpdatePromotionRequest) returns (UpdatePromotionResponse) {
        option (google.api.http) = {
            post: "/v1/update/promotion"
            body: "*"
        };
    }

    rpc UpdateAppPromotion(UpdateAppPromotionRequest) returns (UpdateAppPromotionResponse) {
        option (google.api.http) = {
            post: "/v1/update/app/promotion"
            body: "*"
        };
    }

    rpc GetPromotions(GetPromotionsRequest) returns (GetPromotionsResponse) {
        option (google.api.http) = {
            post: "/v1/get/promotions"
            body: "*"
        };
    }

    rpc GetAppPromotions(GetAppPromotionsRequest) returns (GetAppPromotionsResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/promotions"
            body: "*"
        };
    }
}

message Promotion {
    string          ID        = 10;
    string          AppID     = 20;
    string          GoodID    = 30;
    string          GoodName  = 40;
    string          Message   = 50;
    uint32          StartAt   = 60;
    uint32          EndAt     = 70;
    string          Price     = 80;
    repeated string Posters   = 90;
    uint32          CreatedAt = 100;
    uint32          UpdatedAt = 110;
}

message CreatePromotionRequest {
    string          AppID   = 10;
    string          GoodID  = 20;
    string          Message = 30;
    uint32          StartAt = 40;
    uint32          EndAt   = 50;
    string          Price   = 60;
    repeated string Posters = 70;
}

message CreatePromotionResponse {
    Promotion Info = 10;
}

message CreateAppPromotionRequest {
    string          TargetAppID = 10;
    string          GoodID      = 20;
    string          Message     = 30;
    uint32          StartAt     = 40;
    uint32          EndAt       = 50;
    string          Price       = 60;
    repeated string Posters     = 70;
}

message CreateAppPromotionResponse {
    Promotion Info = 10;
}

message UpdatePromotionRequest {
    string          ID       = 10;
    string          AppID    = 20;
    optional string Message  = 30;
    optional uint32 StartAt  = 40;
    optional uint32 EndAt    = 50;
    optional string Price    = 60;
    repeated string Posters  = 70;
}

message UpdatePromotionResponse {
    Promotion Info = 10;
}

message UpdateAppPromotionRequest {
    string          ID          = 10;
    string          TargetAppID = 20;
    optional string Message     = 30;
    optional uint32 StartAt     = 40;
    optional uint32 EndAt       = 50;
    optional string Price       = 60;
    repeated string Posters     = 70;
}

message UpdateAppPromotionResponse {
    Promotion Info = 10;
}

message GetPromotionsRequest {
    string AppID  = 10;
    int32  Offset = 20;
    int32  Limit  = 30;
}

message GetPromotionsResponse {
    repeated Promotion Infos = 10;
    uint32             Total = 20;
}

message GetAppPromotionsRequest {
    string TargetAppID = 10;
    int32  Offset      = 20;
    int32  Limit       = 30;
}

message GetAppPromotionsResponse {
    repeated Promotion Infos = 10;
    uint32             Total = 20;
}