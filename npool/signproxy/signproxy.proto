syntax = "proto3";

package sphinx.proxy.v1;

option go_package = "github.com/NpoolPlatform/message/npool/signproxy";

import "google/protobuf/empty.proto";
import "npool/sphinxplugin/sphinxplugin.proto";

// Service Name
service SignProxy {
    // RegisterCoin register new coin
    rpc RegisterCoin (RegisterCoinRequest) returns (RegisterCoinResponse){}
    // WalletNew create new account
    rpc WalletNew (google.protobuf.Empty) returns (WalletNewResponse) {}
    // Transaction use transfer
    rpc Transaction (stream TransactionResponse) returns (stream TransactionRequest) {}
    // WalletBalance get account balance
    rpc WalletBalance (sphinx.plugin.v1.WalletBalanceRequest) returns (sphinx.plugin.v1.WalletBalanceResponse) {}
}

message RegisterCoinRequest {
    sphinx.plugin.v1.CoinType CoinType = 100;
}

message RegisterCoinResponse {
}

message AccountInfo {
    string SigType = 100;// secp256k1
    string Address = 110;
}

message WalletNewResponse {
    AccountInfo Info = 100;
}

message TransactionRequest {
    sphinx.plugin.v1.CoinType CoinType               = 100;
    sphinx.plugin.v1.UnsignedMessage Message         = 110;
}

message TransactionResponse {
    TransactionResponseInfo Info = 100;
}

message TransactionResponseInfo {
    string Address            = 100;// create new account address
    sphinx.plugin.v1.UnsignedMessage Message   = 110;
	sphinx.plugin.v1.Signature       Signature = 120;
}
