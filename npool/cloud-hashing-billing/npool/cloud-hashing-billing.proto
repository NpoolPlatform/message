syntax = "proto3";

package cloud.hashing.billing.v1;

option go_package = "github.com/NpoolPlatform/cloud-hashing-billing/message/npool";

import "google/api/annotations.proto";
import "google/protobuf/empty.proto";

// Cloud Hashing Billing
service CloudHashingBilling {
    // Method Version
    rpc Version (google.protobuf.Empty) returns (VersionResponse){
        option (google.api.http) = {
            post: "/version"
            body: "*"
        };
    }

    rpc CreateCoinAccount(CreateCoinAccountRequest) returns (CreateCoinAccountResponse) {
        option (google.api.http) = {
            post: "/v1/create/coin/account"
            body: "*"
        };
    }
    rpc GetCoinAccount(GetCoinAccountRequest) returns (GetCoinAccountResponse) {
        option (google.api.http) = {
            post: "/v1/get/coin/account"
            body: "*"
        };
    }
    rpc GetCoinAccountByCoinAddress(GetCoinAccountByCoinAddressRequest) returns (GetCoinAccountByCoinAddressResponse) {
        option (google.api.http) = {
            post: "/v1/get/coin/account/by/coin/address"
            body: "*"
        };
    }
    rpc GetCoinAccountsByAppUser(GetCoinAccountsByAppUserRequest) returns (GetCoinAccountsByAppUserResponse) {
        option (google.api.http) = {
            post: "/v1/get/coin/accounts/by/app/user"
            body: "*"
        };
    }
    rpc DeleteCoinAccount(DeleteCoinAccountRequest) returns (DeleteCoinAccountResponse) {
        option (google.api.http) = {
            post: "/v1/delete/coin/account"
            body: "*"
        };
    }

    rpc CreateCoinAccountTransaction(CreateCoinAccountTransactionRequest) returns (CreateCoinAccountTransactionResponse) {
        option (google.api.http) = {
            post: "/v1/create/coin/account/transaction"
            body: "*"
        };
    }
    rpc GetCoinAccountTransaction(GetCoinAccountTransactionRequest) returns (GetCoinAccountTransactionResponse) {
        option (google.api.http) = {
            post: "/v1/get/coin/account/transaction"
            body: "*"
        };
    }
    rpc GetCoinAccountTransactionsByCoinAccount(GetCoinAccountTransactionsByCoinAccountRequest) returns (GetCoinAccountTransactionsByCoinAccountResponse) {
        option (google.api.http) = {
            post: "/v1/get/coin/account/transactions/by/coin/account"
            body: "*"
        };
    }
    rpc GetCoinAccountTransactionsByState(GetCoinAccountTransactionsByStateRequest) returns (GetCoinAccountTransactionsByStateResponse) {
        option (google.api.http) = {
            post: "/v1/get/coin/account/transactions/by/state"
            body: "*"
        };
    }
    rpc GetCoinAccountTransactionsByCoin(GetCoinAccountTransactionsByCoinRequest) returns (GetCoinAccountTransactionsByCoinResponse) {
        option (google.api.http) = {
            post: "/v1/get/coin/account/transactions/by/coin"
            body: "*"
        };
    }
    rpc UpdateCoinAccountTransaction(UpdateCoinAccountTransactionRequest) returns (UpdateCoinAccountTransactionResponse) {
        option (google.api.http) = {
            post: "/v1/update/coin/account/transaction"
            body: "*"
        };
    }
    rpc GetCoinAccountTransactionDetail(GetCoinAccountTransactionDetailRequest) returns (GetCoinAccountTransactionDetailResponse) {
        option (google.api.http) = {
            post: "/v1/get/coin/account/transaction/detail"
            body: "*"
        };
    }
    rpc DeleteCoinAccountTransaction(DeleteCoinAccountTransactionRequest) returns (DeleteCoinAccountTransactionResponse) {
        option (google.api.http) = {
            post: "/v1/delete/coin/account/transaction"
            body: "*"
        };
    }

    rpc CreatePlatformBenefit(CreatePlatformBenefitRequest) returns (CreatePlatformBenefitResponse) {
        option (google.api.http) = {
            post: "/v1/create/platform/benefit",
            body: "*"
        };
    }
    rpc GetLatestPlatformBenefitByGood(GetLatestPlatformBenefitByGoodRequest) returns (GetLatestPlatformBenefitByGoodResponse) {
        option (google.api.http) = {
            post: "/v1/get/latest/platform/benefit/by/good"
            body: "*"
        };
    }
    rpc GetPlatformBenefitsByGood(GetPlatformBenefitsByGoodRequest) returns (GetPlatformBenefitsByGoodResponse) {
        option (google.api.http) = {
            post: "/v1/get/platform/benefits/by/good"
            body: "*"
        };
    }
    rpc GetPlatformBenefit(GetPlatformBenefitRequest) returns (GetPlatformBenefitResponse) {
        option (google.api.http) = {
            post: "/v1/get/platform/benefit"
            body: "*"
        };
    }
    rpc GetPlatformBenefitDetail(GetPlatformBenefitDetailRequest) returns (GetPlatformBenefitDetailResponse) {
        option (google.api.http) = {
            post: "/v1/get/platform/benefit/detail"
            body: "*"
        };
    }

    rpc CreatePlatformSetting(CreatePlatformSettingRequest) returns (CreatePlatformSettingResponse) {
        option (google.api.http) = {
            post: "/v1/create/platform/setting"
            body: "*"
        };
    }
    rpc UpdatePlatformSetting(UpdatePlatformSettingRequest) returns (UpdatePlatformSettingResponse) {
        option (google.api.http) = {
            post: "/v1/update/platform/setting"
            body: "*"
        };
    }
    rpc GetPlatformSettingByGood(GetPlatformSettingByGoodRequest) returns (GetPlatformSettingByGoodResponse) {
        option (google.api.http) = {
            post: "/v1/get/platform/setting/by/good"
            body: "*"
        };
    }
    rpc GetPlatformSettingDetail(GetPlatformSettingDetailRequest) returns (GetPlatformSettingDetailResponse) {
        option (google.api.http) = {
            post: "/v1/get/platform/setting/detail"
            body: "*"
        };
    }
    rpc GetPlatformSetting(GetPlatformSettingRequest) returns (GetPlatformSettingResponse) {
        option (google.api.http) = {
            post: "/v1/get/platform/setting"
            body: "*"
        };
    }

    rpc CreateUserBenefit(CreateUserBenefitRequest) returns (CreateUserBenefitResponse) {
        option (google.api.http) = {
            post: "/v1/create/user/benefit"
            body: "*"
        };
    }
    rpc GetUserBenefitsByAppUser(GetUserBenefitsByAppUserRequest) returns (GetUserBenefitsByAppUserResponse) {
        option (google.api.http) = {
            post: "/v1/get/user/benefits/by/app/user"
            body: "*"
        };
    }
    rpc GetUserBenefitsByApp(GetUserBenefitsByAppRequest) returns (GetUserBenefitsByAppResponse) {
        option (google.api.http) = {
            post: "/v1/get/user/benefits/by/app"
            body: "*"
        };
    }
    rpc GetLatestUserBenefitByGoodAppUser(GetLatestUserBenefitByGoodAppUserRequest) returns (GetLatestUserBenefitByGoodAppUserResponse) {
        option (google.api.http) = {
            post: "/v1/get/latest/user/benefit/by/good/app/user"
            body: "*"
        };
    }
}

// request body and response
message VersionResponse {
    string Info = 100;
}

message CoinAccountInfo {
    string ID = 200;
    string CoinTypeID = 201;
    string Address = 202;
    string GeneratedBy = 203;
    string UsedFor = 204;
    bool Idle = 205;
    string AppID = 206;
    string UserID = 207;
}

message CreateCoinAccountRequest {
    CoinAccountInfo Info = 300;
}

message CreateCoinAccountResponse {
    CoinAccountInfo Info = 400;
}

message GetCoinAccountRequest {
    string ID = 500;
}

message GetCoinAccountResponse {
    CoinAccountInfo Info = 600;
}

message GetCoinAccountByCoinAddressRequest {
    string CoinInfoID = 1;
    string Address = 2;
}

message GetCoinAccountByCoinAddressResponse {
    CoinAccountInfo Info = 1;
}

message GetCoinAccountsByAppUserRequest {
    string AppID = 700;
    string UserID = 701;
}

message GetCoinAccountsByAppUserResponse {
    repeated CoinAccountInfo Infos = 800;
}

message DeleteCoinAccountRequest {
    string ID = 900;
}

message DeleteCoinAccountResponse {
    CoinAccountInfo Info = 1000;
}

message CoinAccountTransaction {
    string ID = 1100;
    string AppID = 1101;
    string UserID = 1102;
    string FromAddressID = 1103;
    string ToAddressID = 1104;
    string CoinTypeID = 1105;
    double Amount = 1106;
    string Message = 1107;
    uint32 CreateAt = 1108;
    string State = 1109;
    string ChainTransactionID = 1110;
    string PlatformTransactionID = 1111;
}

message CreateCoinAccountTransactionRequest {
    CoinAccountTransaction Info = 1200;
}

message CreateCoinAccountTransactionResponse {
    CoinAccountTransaction Info = 1300;
}

message GetCoinAccountTransactionRequest {
    string ID = 1400;
}

message GetCoinAccountTransactionResponse {
    CoinAccountTransaction Info = 1500;
}

message CoinAccountTransactionDetail {
    string ID = 1510;
    string AppID = 1511;
    string UserID = 1512;
    CoinAccountInfo FromAddress = 1513;
    CoinAccountInfo ToAddress = 1514;
    string CoinTypeID = 1515;
    double Amount = 1516;
    string Message = 1517;
    uint32 CreateAt = 1518;
    string State = 1519;
    string ChainTransactionID = 1520;
    string PlatformTransactionID = 1521;
}

message GetCoinAccountTransactionDetailRequest {
    string ID = 1550;
}

message GetCoinAccountTransactionDetailResponse {
    CoinAccountTransactionDetail Detail = 1560;
}

message GetCoinAccountTransactionsByCoinAccountRequest {
    string CoinTypeID = 1600;
    string AddressID = 1601;
}

message GetCoinAccountTransactionsByCoinAccountResponse {
    repeated CoinAccountTransaction Infos = 1700;
}

message GetCoinAccountTransactionsByStateRequest {
    string State = 1;
}

message GetCoinAccountTransactionsByStateResponse {
    repeated CoinAccountTransaction Infos = 1;
}

message GetCoinAccountTransactionsByCoinRequest {
    string CoinTypeID = 1800;
}

message GetCoinAccountTransactionsByCoinResponse {
    repeated CoinAccountTransaction Infos = 1900;
}

message UpdateCoinAccountTransactionRequest {
    CoinAccountTransaction Info = 1910;
}

message UpdateCoinAccountTransactionResponse {
    CoinAccountTransaction Info = 1920;
}

message DeleteCoinAccountTransactionRequest {
    string ID = 2000;
}

message DeleteCoinAccountTransactionResponse {
    CoinAccountTransaction Info = 2100;
}

message PlatformBenefit {
    string ID = 2200;
    string GoodID = 2201;
    string BenefitAccountID = 2202;
    double Amount = 2203;
    uint32 CreateAt = 2204;
    string ChainTransactionID = 2205;
    uint32 LastBenefitTimestamp = 2206;
}

message CreatePlatformBenefitRequest {
    PlatformBenefit Info = 2300;
}

message CreatePlatformBenefitResponse {
    PlatformBenefit Info = 2400;
}

message GetPlatformBenefitsByGoodRequest {
    string GoodID = 2500;
}

message GetPlatformBenefitsByGoodResponse {
    repeated PlatformBenefit Infos = 2600;
}

message PlatformBenefitDetail {
    string ID = 2610;
    string GoodID = 2611;
    CoinAccountInfo BenefitAddress = 2612;
    double Amount = 2613;
    uint32 CreateAt = 2614;
    string ChainTransactionID = 2615;
}

message GetPlatformBenefitDetailRequest {
    string ID = 2620;
}

message GetPlatformBenefitDetailResponse {
    PlatformBenefitDetail Detail = 2630;
}

message GetPlatformBenefitRequest {
    string ID = 2640;
}

message GetPlatformBenefitResponse {
    PlatformBenefit Info = 2650;
}

message GetLatestPlatformBenefitByGoodRequest {
    string GoodID = 1;
}

message GetLatestPlatformBenefitByGoodResponse {
    PlatformBenefit Info = 1;
}

message PlatformSetting {
    string ID = 2700;
    string GoodID = 2701;
    string BenefitAccountID = 2702;
    string PlatformOfflineAccountID = 2703;
    string UserOnlineAccountID = 2704;
    string UserOfflineAccountID = 2705;
    int32 BenefitIntervalHours = 2706;
}

message CreatePlatformSettingRequest {
    PlatformSetting Info = 2800;
}

message CreatePlatformSettingResponse {
    PlatformSetting Info = 2900;
}

message UpdatePlatformSettingRequest {
    PlatformSetting Info = 3000;
}

message UpdatePlatformSettingResponse {
    PlatformSetting Info = 3100;
}

message GetPlatformSettingByGoodRequest {
    string GoodID = 3200;
}

message GetPlatformSettingByGoodResponse {
    PlatformSetting Info = 3300;
}

message PlatformSettingDetail {
    string ID = 3310;
    string GoodID = 3311;
    CoinAccountInfo BenefitAddress = 3312;
    CoinAccountInfo PlatformOfflineAddress = 3313;
    CoinAccountInfo UserOnlineAddress = 3314;
    CoinAccountInfo UserOfflineAddress = 3315;
    int32 BenefitIntervalHours = 3316;
}

message GetPlatformSettingDetailRequest {
    string ID = 3320;
}

message GetPlatformSettingDetailResponse {
    PlatformSettingDetail Detail = 3330;
}

message GetPlatformSettingRequest {
    string ID = 3340;
}

message GetPlatformSettingResponse {
    PlatformSetting Info = 3350;
}

message UserBenefit {
    string ID = 3401;
    string UserID = 3402;
    string AppID = 3403;
    string GoodID = 3404;
    double Amount = 3405;
    uint32 CreateAt = 3406;
    string OrderID = 3407;
    uint32 LastBenefitTimestamp = 3408;
}

message CreateUserBenefitRequest {
    UserBenefit Info = 3500;
}

message CreateUserBenefitResponse {
    UserBenefit Info = 3600;
}

message GetUserBenefitsByAppUserRequest {
    string AppID = 3700;
    string UserID = 3701;
}

message GetUserBenefitsByAppUserResponse {
    repeated UserBenefit Infos = 3800;
}

message PageInfo {
    int32 PageIndex = 21;
    int32 PageSize = 22;
}

message GetUserBenefitsByAppRequest {
    string AppID = 3900;
    PageInfo PageInfo = 3950;
}

message GetUserBenefitsByAppResponse {
    repeated UserBenefit Infos = 3960;
}

message GetLatestUserBenefitByGoodAppUserRequest {
    string AppID = 1;
    string UserID = 2;
    string GoodID = 3;
}

message GetLatestUserBenefitByGoodAppUserResponse {
    UserBenefit Info = 1;
}

