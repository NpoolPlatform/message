syntax = "proto3";

package appuser.middleware.authing.oauth.appoauththirdparty.v1;

option go_package = "github.com/NpoolPlatform/message/npool/appuser/mw/v1/authing/oauth/appoauththirdparty";

import "npool/basetypes/v1/conds.proto";
import "npool/basetypes/v1/signmethod.proto";

service Middleware {
    rpc CreateOAuthThirdParty        (CreateOAuthThirdPartyRequest)       returns (CreateOAuthThirdPartyResponse)      {}

    rpc GetOAuthThirdParties         (GetOAuthThirdPartiesRequest)        returns (GetOAuthThirdPartiesResponse)       {}
    rpc GetOAuthThirdParty           (GetOAuthThirdPartyRequest)          returns (GetOAuthThirdPartyResponse)         {}
    rpc GetOAuthThirdPartyOnly       (GetOAuthThirdPartyOnlyRequest)      returns (GetOAuthThirdPartyOnlyResponse)     {}

    rpc ExistOAuthThirdParty         (ExistOAuthThirdPartyRequest)        returns (ExistOAuthThirdPartyResponse)       {}
    rpc ExistOAuthThirdPartyConds    (ExistOAuthThirdPartyCondsRequest)   returns (ExistOAuthThirdPartyCondsResponse)  {}

    rpc DeleteOAuthThirdParty        (DeleteOAuthThirdPartyRequest)       returns (DeleteOAuthThirdPartyResponse)      {}
}

message OAuthThirdPartyReq {
    optional string ID           = 10;
    optional string AppID        = 20;
    optional string ThirdPartyID = 30;
    optional string ClientID     = 40;
    optional string ClientSecret = 50;
    optional string CallbackURL  = 60;
}

message OAuthThirdParty {
    // @inject_tag: sql:"id"
    string ID             = 10;
    // @inject_tag: sql:"app_id"
    string AppID          = 20;
    // @inject_tag: sql:"third_party_id"
    string ThirdPartyID   = 30;
    // @inject_tag: sql:"client_id"
    string ClientID       = 40;
    // @inject_tag: sql:"client_secret"
    string ClientSecret   = 50;
    // @inject_tag: sql:"callback_url"
    string CallbackURL    = 60;
    // @inject_tag: sql:"client_name"
    basetypes.v1.SignMethod ClientName = 70;
    // @inject_tag: sql:"client_tag"
    string ClientTag      = 80;
    // @inject_tag: sql:"client_logo_url"
    string ClientLogoURL  = 90;
    // @inject_tag: sql:"client_oauth_url"
    string ClientOAuthURL = 100;
    // @inject_tag: sql:"response_type"
    string ResponseType   = 110;
    // @inject_tag: sql:"scope"
    string Scope          = 120;
    // @inject_tag: sql:"salt"
    string Salt           = 130;
    // @inject_tag: sql:"created_at"
    uint32 CreatedAt      = 1000;
    // @inject_tag: sql:"updated_at"
    uint32 UpdatedAt      = 1010;
}

message Conds {
    optional basetypes.v1.StringVal      ID            = 10;
    optional basetypes.v1.StringVal      AppID         = 20;
    optional basetypes.v1.StringVal      ThirdPartyID  = 30;
    optional basetypes.v1.StringSliceVal ThirdPartyIDs = 40;
    optional basetypes.v1.Int32Val       ClientName    = 50;
}

message CreateOAuthThirdPartyRequest {
    OAuthThirdPartyReq Info = 10;
}

message CreateOAuthThirdPartyResponse {
    OAuthThirdParty Info = 10;
}

message UpdateOAuthThirdPartyRequest {
    OAuthThirdPartyReq Info = 10;
}

message UpdateOAuthThirdPartyResponse {
    OAuthThirdParty Info = 10;
}

message GetOAuthThirdPartiesRequest {
    Conds Conds  = 10;
    int32 Offset = 20;
    int32 Limit  = 30;
}

message GetOAuthThirdPartiesResponse {
    repeated OAuthThirdParty Infos = 10;
    uint32 Total  = 40;
}

message GetOAuthThirdPartyRequest {
    string ID = 10;
}

message GetOAuthThirdPartyResponse {
    OAuthThirdParty Info = 10;
}

message GetOAuthThirdPartyOnlyRequest {
    Conds Conds = 10;
}

message GetOAuthThirdPartyOnlyResponse {
    OAuthThirdParty Info = 10;
}

message ExistOAuthThirdPartyRequest {
    string ID = 10;
}

message ExistOAuthThirdPartyResponse {
    bool Info = 10;
}

message ExistOAuthThirdPartyCondsRequest {
    Conds Conds = 10;
}

message ExistOAuthThirdPartyCondsResponse {
    bool Info = 10;
}

message DeleteOAuthThirdPartyRequest {
    OAuthThirdPartyReq Info = 10;
}

message DeleteOAuthThirdPartyResponse {
    OAuthThirdParty Info = 10;
}
