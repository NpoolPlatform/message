syntax = "proto3";

package appuser.middleware.app.v1;

option go_package = "github.com/NpoolPlatform/message/npool/appuser/mw/v1/app";

service AppMw {
    rpc GetApp      (GetAppRequest)      returns (GetAppResponse)      {}
    rpc GetApps     (GetAppsRequest)     returns (GetAppsResponse)     {}
    rpc GetUserApps (GetUserAppsRequest) returns (GetUserAppsResponse) {}
}

message App {
    // Base info
    string          ID                 = 10;
    string          CreatedBy          = 20;
    string          Name               = 30;
    string          Logo               = 40;
    string          Description        = 50;

    // Banned
    bool            Banned             = 60;
    string          BanAppID           = 70;
    string          BanMessage         = 80;

    // Sign methods
    repeated string SignupMethods      = 90;
    repeated string ExtSigninMethods   = 100;

    // Control flag
    string          RecaptchaMethod    = 110;
    bool            KycEnable          = 120;
    bool            SigninVerifyEnable = 130;
    bool            InvitationCodeMust = 140;

    string          CreateAt           = 150;
}

message GetAppRequest {
    string ID = 10;
}

message GetAppResponse {
    App Info = 10;
}


message GetAppsRequest {
    int32 Offset = 10;
    int32 Limit  = 20;
}

message GetAppsResponse {
    repeated App Infos = 10;
    uint32       Total = 20;
}

message GetUserAppsRequest {
    string UserID = 10;
    int32  Offset = 20;
    int32  Limit  = 30;
}

message GetUserAppsResponse {
    repeated App Infos = 10;
    uint32       Total = 20;
}
