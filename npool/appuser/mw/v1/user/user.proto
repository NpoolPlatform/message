syntax = "proto3";

package appuser.middleware.user.v1;

option go_package = "github.com/NpoolPlatform/message/npool/appuser/mw/v1/user";

import "npool/npool.proto";

service UserMw {
    rpc GetUsers      (GetUsersRequest)       returns (GetUsersResponse)      {}
    rpc GetAppUsers   (GetAppUsersRequest)    returns (GetAppUsersResponse)   {}
    rpc CreateUser    (CreateUserRequest)     returns (CreateUserResponse)    {}
    rpc CreateAppUser (CreateAppUserRequest)  returns (CreateAppUserResponse) {}
    rpc UpdateUser    (UpdateUserRequest)     returns (UpdateUserResponse)    {}
}

message UserReq {
    // Base
    optional string ID                                = 10;
    optional string AppID                             = 20;
    optional string EmailAddress                      = 30;
    optional string PhoneNO                           = 40;

    // Imported
    optional string ImportedFromAppID                 = 50;
    optional string ImportedFromAppName               = 60;
    optional string ImportedFromAppLogo               = 70;
    optional string ImportedFromAppHome               = 80;

    // Extra
    optional string Username                          = 90;
    repeated string AddressFields                     = 100;
    optional string Gender                            = 110;
    optional string PostalCode                        = 120;
    optional uint32 Age                               = 130;
    optional uint32 Birthday                          = 140;
    optional string Avatar                            = 150;
    optional string Organization                      = 160;
    optional string FirstName                         = 170;
    optional string LastName                          = 180;
    optional string IDNumber                          = 190;

    // Control flat
    optional bool   SigninVerifyByGoogleAuthentication = 200;
    optional bool   GoogleAuthenticationVerified       = 210;
    optional bool   Banned                             = 220;
    optional string BanMessage                         = 230;

    // Secret map
    optional bool HasGoogleSecret                     = 240;

    // Role
    repeated string Roles                             = 250;

    optional uint32 CreateAt                          = 260;
}

message User {
    // Base
    string ID                                = 10;
    string AppID                             = 20;
    string EmailAddress                      = 30;
    string PhoneNO                           = 40;

    // Imported
    string ImportedFromAppID                 = 50;
    string ImportedFromAppName               = 60;
    string ImportedFromAppLogo               = 70;
    string ImportedFromAppHome               = 80;

    // Extra
    string Username                          = 90;
    repeated string AddressFields            = 100;
    string Gender                            = 110;
    string PostalCode                        = 120;
    uint32 Age                               = 130;
    uint32 Birthday                          = 140;
    string Avatar                            = 150;
    string Organization                      = 160;
    string FirstName                         = 170;
    string LastName                          = 180;
    string IDNumber                          = 190;

    // Control flat
    bool   SigninVerifyByGoogleAuthentication = 200;
    bool   GoogleAuthenticationVerified       = 210;
    bool   Banned                             = 220;
    string BanMessage                         = 230;

    // Secret map
    bool HasGoogleSecret                     = 240;

    // Role
    repeated string Roles                    = 250;

    uint32 CreateAt                          = 260;
}

message Conds {
    npool.v1.StringVal ID            = 10;
    npool.v1.StringSlicesVal IDIn    = 20;
    npool.v1.StringVal AppID         = 30;
    npool.v1.StringVal PhoneNo       = 40;
    npool.v1.StringVal EmailAddress  = 50;
    npool.v1.StringVal ImportFromApp = 60;
}

message GetUsersRequest {
    string AppID  = 10;
    int32  Offset = 20;
    int32  Limit  = 30;
}

message GetUsersResponse {
    repeated User Infos = 10;
}

message GetAppUsersRequest {
    string TargetAppID = 10;
    int32  Offset      = 20;
    int32  Limit       = 30;
}

message GetAppUsersResponse {
    repeated User Infos = 10;
}

message CreateUserRequest {
    User Info = 10;
}

message CreateUserResponse {
    User Info = 10;
}

message CreateAppUserRequest {
    string TargetAppID = 10;
    User Info          = 20;
}

message CreateAppUserResponse {
    User Info = 10;
}

message UpdateUserRequest {
    User Info = 10;
}

message UpdateUserResponse {
    User Info = 10;
}
