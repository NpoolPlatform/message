syntax = "proto3";

package appuser.gateway.approleuser.v1;

option go_package = "github.com/NpoolPlatform/message/npool/appuser/gw/v1/approleuser";

import "google/api/annotations.proto";
import "npool/appuser/mgr/v2/approleuser/approleuser.proto";

service Gateway {
    rpc CreateRoleUser (CreateRoleUserRequest) returns (CreateRoleUserResponse) {
        option (google.api.http) = {
            post: "/v1/create/role/user"
            body: "*"
        };
    }

    rpc GetRoleUsers (GetRoleUsersRequest) returns (GetRoleUsersResponse) {
        option (google.api.http) = {
            post: "/v1/get/role/users"
            body: "*"
        };
    }

    rpc DeleteRoleUser (DeleteRoleUserRequest) returns (DeleteRoleUserResponse) {
        option (google.api.http) = {
            post: "/v1/delete/role/user"
            body: "*"
        };
    }

    rpc CreateAppRoleUser(CreateAppRoleUserRequest) returns (CreateAppRoleUserResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/role/user"
            body: "*"
        };
    }

    rpc GetAppRoleUsers (GetAppRoleUsersRequest) returns (GetAppRoleUsersResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/role/users"
            body: "*"
        };
    }

}

message CreateRoleUserRequest {
    // Permissioned by path
    string                                        TargetUserID = 10;
    appuser.manager.approleuser.v2.AppRoleUserReq Info         = 20;
}

message CreateRoleUserResponse {
    appuser.manager.approleuser.v2.AppRoleUser Info = 10;
}

message GetRoleUsersRequest {
    // Permissioned by path
    string AppID  = 10;
    string RoleID = 20;
    int32  Limit  = 30;
    int32  Offset = 40;
}

message GetRoleUsersResponse {
    repeated appuser.manager.approleuser.v2.AppRoleUser Infos = 10;
    uint32                                              Total = 20;
}

message DeleteRoleUserRequest {
    // Permissioned by path
    string ID = 10;
}

message DeleteRoleUserResponse {
    appuser.manager.approleuser.v2.AppRoleUser Info = 10;
}

message CreateAppRoleUserRequest {
    // Permissioned by path
    string                                        TargetAppID  = 10;
    string                                        TargetUserID = 20;
    appuser.manager.approleuser.v2.AppRoleUserReq Info         = 30;
}

message CreateAppRoleUserResponse {
    appuser.manager.approleuser.v2.AppRoleUser Info = 10;
}

message GetAppRoleUsersRequest {
    // Permissioned by path
    string TargetAppID = 10;
    string RoleID      = 20;
    int32  Limit       = 30;
    int32  Offset      = 40;
}

message GetAppRoleUsersResponse {
    repeated appuser.manager.approleuser.v2.AppRoleUser Infos = 10;
    uint32                                              Total = 20;
}
