syntax = "proto3";

package appuser.gateway.appuser1.v1;

option go_package = "github.com/NpoolPlatform/message/npool/appuser/gw/v1/appuser";

import "google/api/annotations.proto";
import "google/protobuf/empty.proto";
import "npool/npool.proto";
import "npool/appuser/mgr/v2/appuser/appuser.proto";
import "npool/appuser/mgr/v2/appusersecret/appusersecret.proto";
import "npool/appuser/mgr/v2/approle/approle.proto";
import "npool/appuser/mw/v1/user/user.proto";

service AppUserGw {
    rpc CreateUser (CreateUserRequest) returns (CreateUserResponse) {
        option (google.api.http) = {
            post: "/v2/create/user"
            body: "*"
        };
    }

    rpc UpdateUser (UpdateUserRequest) returns (UpdateUserResponse) {
        option (google.api.http) = {
            post: "/v2/update/user"
            body: "*"
        };
    }

    rpc GetUsers (GetUsersRequest) returns (GetUsersResponse) {
        option (google.api.http) = {
            post: "/v1/get/users"
            body: "*"
        };
    }

    rpc GetAppUsers (GetAppUsersRequest) returns (GetAppUsersResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/users"
            body: "*"
        };
    }
}

message CreateUserRequest {
    appuser.manager.appuser.v2.AppUserReq Info = 10;
}

message CreateUserResponse {
    appuser.manager.appuser.v2.AppUser Info = 10;
}

message UpdateUserRequest {
    appuser.manager.appuser.v2.AppUserReq Info = 10;
}

message UpdateUserResponse {
    appuser.manager.appuser.v2.AppUser Info = 10;
}

message GetUsersRequest {
    string AppID  = 10;
    int32  Offset = 20;
    int32  Limit  = 30;
}

message GetUsersResponse {
    repeated appuser.middleware.user.v1.User Infos = 10;
}

message GetAppUsersRequest {
    string TargetAppID = 10;
    int32  Offset      = 20;
    int32  Limit       = 30;
}

message GetAppUsersResponse {
    repeated appuser.middleware.user.v1.User Infos = 10;
}
