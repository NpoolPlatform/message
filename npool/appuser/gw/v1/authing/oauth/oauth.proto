syntax = "proto3";

package appuser.gateway.authing.oauth.v1;

option go_package = "github.com/NpoolPlatform/message/npool/appuser/gw/v1/authing/oauth";

import "google/api/annotations.proto";
import "npool/appuser/mw/v1/user/user.proto";
import "npool/appuser/mw/v1/authing/oauth/appoauththirdparty/appoauththirdparty.proto";

service Gateway {
    rpc GetOAuthLoginList (GetOAuthLoginListRequest) returns (GetOAuthLoginListResponse) {
        option (google.api.http) = {
            post: "/v1/get/oauth/login/list"
            body: "*"
        };
    }

    rpc GetOAuthLoginURL (GetOAuthLoginURLRequest) returns (GetOAuthLoginURLResponse) {
        option (google.api.http) = {
            post: "/v1/get/oauth/login/url"
            body: "*"
        };
    }

    rpc OAuthLogin (OAuthLoginRequest) returns (OAuthLoginResponse) {
        option (google.api.http) = {
            post: "/v1/oauth/login"
            body: "*"
        };
    }
}

message GetOAuthLoginListRequest {
    string AppID = 10;
}

message GetOAuthLoginListResponse {
    repeated appuser.middleware.authing.oauth.appoauththirdparty.v1.OAuthThirdParty OAuthLoginInfoLists = 10;
}

message GetOAuthLoginURLRequest {
    string AppID     = 10;
    string ThirdName = 20;
}

message GetOAuthLoginURLResponse {
    string RedirectUrl = 10;
}

message OAuthLoginRequest {
    string AppID = 10;
    string Code  = 20;
    string State = 30;
}

message OAuthLoginResponse {
    appuser.middleware.user.v1.User Info = 10;
}
