syntax = "proto3";

package inspire.gateway.inspire2.coupon.v1;

option go_package = "github.com/NpoolPlatform/message/npool/inspire/gw/v1/inspire/coupon";

import "google/api/annotations.proto";
import "npool/inspire/mgr/v1/inspire/coupon/allocated/allocated.proto";
import "npool/npool.proto";
import "npool/inspire/mw/v1/inspire/coupon/coupon.proto";

// Service Name
service Gateway {
    rpc GetCoupon (GetCouponRequest) returns (GetCouponResponse) {
        option (google.api.http) = {
            post: "/v1/get/coupon"
            body: "*"
        };
    }
    rpc GetCoupons (GetCouponsRequest) returns (GetCouponsResponse) {
        option (google.api.http) = {
            post: "/v1/get/coupons"
            body: "*"
        };
    }
    rpc GetAppUserCoupons (GetAppUserCouponsRequest) returns (GetAppUserCouponsResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/user/coupons"
            body: "*"
        };
    }
    rpc CreateCoupon (CreateCouponRequest) returns (CreateCouponResponse) {
        option (google.api.http) = {
            post: "/v1/create/coupon"
            body: "*"
        };
    }
    rpc CreateAppUserCoupon (CreateAppUserCouponRequest) returns (CreateAppUserCouponResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/user/coupon"
            body: "*"
        };
    }
}

message Conds {
    optional npool.v1.StringVal ID       = 10;
    optional npool.v1.StringVal UserID   = 20;
    optional npool.v1.StringVal AppID    = 30;
    optional npool.v1.Uint32Val Type     = 31;
    optional npool.v1.StringVal CouponID = 40;
}

message GetCouponRequest {
    string                                                 ID = 10;
    inspire.manager.inspire.coupon.allocated.v1.CouponType Type = 20;
}

message GetCouponResponse {
    string                                       ID = 10;
    inspire.middleware.inspire1.coupon.v1.Coupon Info = 20;
}

message GetManyCouponsResponse {
    repeated inspire.middleware.inspire1.coupon.v1.Coupon Infos = 10;
}

message GetCouponsRequest {
    string AppID  = 10;
    string UserID = 20;
    uint32 Offset = 30;
    uint32 Limit  = 40;
}

message GetCouponsResponse {
    repeated inspire.middleware.inspire1.coupon.v1.Coupon Infos = 10;
    uint32                                                Total = 20;
}

message GetAppUserCouponsRequest {
    string TargetAppID  = 10;
    string TargetUserID = 20;
    uint32 Offset = 30;
    uint32 Limit  = 40;
}

message GetAppUserCouponsResponse {
    repeated inspire.middleware.inspire1.coupon.v1.Coupon Infos = 10;
    uint32                                                Total = 20;
}

message GetCouponOnlyRequest {
    Conds Coupon = 10;
}

message GetCouponOnlyResponse {
    inspire.middleware.inspire1.coupon.v1.Coupon Info = 10;
}

message CreateCouponRequest {
    string     UserID    = 20;
    string     AppID     = 30;
    inspire.manager.inspire.coupon.allocated.v1.CouponType Type = 40;
    string     CouponID  = 50;
}

message CreateCouponResponse {
    inspire.middleware.inspire1.coupon.v1.Coupon Info = 10;
}

message CreateAppUserCouponRequest {
    string     TargetUserID    = 20;
    string     TargetAppID     = 30;
    inspire.manager.inspire.coupon.allocated.v1.CouponType Type = 40;
    string     CouponID        = 50;
}

message CreateAppUserCouponResponse {
    inspire.middleware.inspire1.coupon.v1.Coupon Info = 10;
}
