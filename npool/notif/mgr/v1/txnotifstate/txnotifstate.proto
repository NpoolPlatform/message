syntax = "proto3";

package notif.manager.txnotiftstate.v1;

option go_package = "github.com/NpoolPlatform/message/npool/notif/mgr/v1/txnotiftstate";

import "npool/notif/mgr/v1/channel/channel.proto";
import "npool/npool.proto";

// Service Name
service Manager {
    rpc CreateTxNotifState     (CreateTxNotifStateRequest)     returns (CreateTxNotifStateResponse)     {}
    rpc CreateTxNotifStates    (CreateTxNotifStatesRequest)    returns (CreateTxNotifStatesResponse)    {}
    rpc UpdateTxNotifState     (UpdateTxNotifStateRequest)     returns (UpdateTxNotifStateResponse)     {}
    rpc GetTxNotifState        (GetTxNotifStateRequest)        returns (GetTxNotifStateResponse)        {}
    rpc GetTxNotifStateOnly    (GetTxNotifStateOnlyRequest)    returns (GetTxNotifStateOnlyResponse)    {}
    rpc GetTxNotifStates       (GetTxNotifStatesRequest)       returns (GetTxNotifStatesResponse)       {}
    rpc ExistTxNotifState      (ExistTxNotifStateRequest)      returns (ExistTxNotifStateResponse)      {}
    rpc ExistTxNotifStateConds (ExistTxNotifStateCondsRequest) returns (ExistTxNotifStateCondsResponse) {}
    rpc CountTxNotifStates     (CountTxNotifStatesRequest)     returns (CountTxNotifStatesResponse)     {}
    rpc DeleteTxNotifState     (DeleteTxNotifStateRequest)     returns (DeleteTxNotifStateResponse)     {}
}

enum TxState {
    DefaultNotifState = 0;
    WaitTxSuccess     = 10;
    WaitSend          = 20;
    AlreadySend       = 30;
}

message TxNotifStateReq {
    optional string     ID          = 10;
    optional string     TxID        = 20;
    optional TxNotifState NotifState  = 30;
}

message TxNotifState {
    string     ID         = 10;
    string     TxID       = 20;
    TxState NotifState = 30;
    uint32     CreatedAt  = 40;
    uint32     UpdatedAt  = 50;
}

message Conds {
    optional npool.v1.StringVal ID         = 10;
    optional npool.v1.StringVal TxID       = 20;
    optional npool.v1.Uint32Val NotifState = 30;
}


message CreateTxNotifStateRequest {
    TxNotifStateReq Info = 10;
}

message CreateTxNotifStateResponse {
    TxNotifState Info = 10;
}

message CreateTxNotifStatesRequest {
    repeated TxNotifStateReq Infos = 10;
}

message CreateTxNotifStatesResponse {
    repeated TxNotifState Infos = 10;
}

message UpdateTxNotifStateRequest {
    TxNotifStateReq Info = 10;
}

message UpdateTxNotifStateResponse {
    TxNotifState Info = 10;
}

message GetTxNotifStateRequest {
    string ID = 10;
}

message GetTxNotifStateResponse {
    TxNotifState Info = 10;
}

message GetTxNotifStatesRequest {
    Conds Conds   = 10;
    int32 Offset  = 20;
    int32 Limit   = 30;
}

message GetTxNotifStatesResponse {
    repeated TxNotifState Infos = 10;
    uint32        Total = 20;
}

message GetTxNotifStateOnlyRequest {
    Conds Conds = 10;
}

message GetTxNotifStateOnlyResponse {
    TxNotifState Info = 10;
}

message ExistTxNotifStateRequest {
    string ID = 10;
}

message ExistTxNotifStateResponse {
    bool Info = 10;
}

message ExistTxNotifStateCondsRequest {
    Conds Conds = 10;
}

message ExistTxNotifStateCondsResponse {
    bool Info = 10;
}

message CountTxNotifStatesRequest {
    Conds Conds = 10;
}

message CountTxNotifStatesResponse {
    uint32 Info = 10;
}

message DeleteTxNotifStateRequest {
    string ID = 10;
}

message DeleteTxNotifStateResponse {
    TxNotifState Info = 10;
}
