syntax = "proto3";

package app.user.gateway.app.v1;

option go_package = "github.com/NpoolPlatform/message/npool/appusergw/app";

import "google/api/annotations.proto";
import "google/protobuf/empty.proto";
import "npool/npool.proto";
import "npool/appusermgrv2/app/app.proto";
import "npool/appusermw/app/app.proto";

service AppUserGatewayApp {

  rpc CreateApp (CreateAppRequest) returns (CreateAppResponse) {
    option (google.api.http) = {
      post: "/v2/create/app"
      body: "*"
    };
  }

  rpc GetApp (GetAppRequest) returns (GetAppResponse) {
    option (google.api.http) = {
      post: "/v2/get/app"
      body: "*"
    };
  }

  rpc GetApps (GetAppsRequest) returns (GetAppsResponse) {
    option (google.api.http) = {
      post: "/v2/get/apps"
      body: "*"
    };
  }

  rpc GetAppsByCreator (GetAppsByCreatorRequest) returns (GetAppsByCreatorResponse) {
    option (google.api.http) = {
      post: "/v2/get/apps/by/creator"
      body: "*"
    };
  }

  rpc UpdateApp (UpdateAppRequest) returns (UpdateAppResponse) {
    option (google.api.http) = {
      post: "/v2/update/app"
      body: "*"
    };
  }

  rpc GetAppInfo (GetAppInfoRequest) returns (GetAppInfoResponse) {
    option (google.api.http) = {
      post: "/v2/get/app/info"
      body: "*"
    };
  }

  rpc GetAppInfos (GetAppInfosRequest) returns (GetAppInfosResponse) {
    option (google.api.http) = {
      post: "/v2/get/app/infos"
      body: "*"
    };
  }

  rpc GetAppInfosByCreator (GetAppInfosByCreatorRequest) returns (GetAppInfosByCreatorResponse) {
    option (google.api.http) = {
      post: "/v1/get/appinfos/by/creator"
      body: "*"
    };
  }

}

message CreateAppRequest {
  .app.user.manager.app.v2.AppReq Info = 10;
}

message CreateAppResponse {
  .app.user.manager.app.v2.App Info = 10;
}

message GetAppRequest {
  string ID = 10;
}

message GetAppResponse {
  .app.user.manager.app.v2.App Info = 10;
}

message GetAppsRequest {
  int32 Offset = 10;
  int32 Limit = 20;
}

message GetAppsResponse {
  repeated .app.user.manager.app.v2.App Infos = 10;
  uint32 Total = 20;
}

message GetAppsByCreatorRequest {
  string UserID = 10;
  int32 Offset = 20;
  int32 Limit = 30;
}

message GetAppsByCreatorResponse {
  repeated .app.user.manager.app.v2.App Infos = 10;
  uint32 Total = 20;
}

message UpdateAppRequest {
  .app.user.manager.app.v2.AppReq Info = 10;
}

message UpdateAppResponse {
  .app.user.manager.app.v2.App Info = 10;
}

message GetAppInfoRequest {
  string ID = 10;
}

message GetAppInfoResponse {
  .app.user.middleware.app.v2.AppInfo Info = 10;
}


message GetAppInfosRequest {
  int32 Offset = 10;
  int32 Limit = 20;
}

message GetAppInfosResponse {
  repeated .app.user.middleware.app.v2.AppInfo Infos = 10;
}

message GetAppInfosByCreatorRequest {
  string UserID = 10;
  int32 Offset = 20;
  int32 Limit = 30;
}

message GetAppInfosByCreatorResponse {
  repeated .app.user.middleware.app.v2.AppInfo Infos = 10;
  uint32 Total = 20;
}
