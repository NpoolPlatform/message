syntax = "proto3";

package app.user.manager.v1;

option go_package = "github.com/NpoolPlatform/message/npool/appusermgr";

import "google/api/annotations.proto";
import "google/protobuf/empty.proto";
import "npool/npool.proto";

service AppUserManager {
    rpc Version (google.protobuf.Empty) returns (npool.v1.VersionResponse){
        option (google.api.http) = {
            post: "/version"
            body: "*"
        };
    }

    rpc CreateApp (CreateAppRequest) returns (CreateAppResponse) {
        option (google.api.http) = {
            post: "/v1/create/app"
            body: "*"
        };
    }
    rpc GetApp (GetAppRequest) returns (GetAppResponse) {
        option (google.api.http) = {
            post: "/v1/get/app"
            body: "*"
        };
    }
    rpc GetApps (GetAppsRequest) returns (GetAppsResponse) {
        option (google.api.http) = {
            post: "/v1/get/apps"
            body: "*"
        };
    }
    rpc GetAppsByCreator (GetAppsByCreatorRequest) returns (GetAppsByCreatorResponse) {
        option (google.api.http) = {
            post: "/v1/get/apps/by/creator"
            body: "*"
        };
    }
    rpc UpdateApp (UpdateAppRequest) returns (UpdateAppResponse) {
        option (google.api.http) = {
            post: "/v1/update/app"
            body: "*"
        };
    }
    rpc CreateAppControl (CreateAppControlRequest) returns (CreateAppControlResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/control"
            body: "*"
        };
    }
    rpc GetAppControl (GetAppControlRequest) returns (GetAppControlResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/control"
            body: "*"
        };
    }
    rpc GetAppControlByApp (GetAppControlByAppRequest) returns (GetAppControlByAppResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/control/by/app"
            body: "*"
        };
    }
    rpc UpdateAppControl (UpdateAppControlRequest) returns (UpdateAppControlResponse) {
        option (google.api.http) = {
            post: "/v1/update/app/control"
            body: "*"
        };
    }
    rpc CreateBanApp (CreateBanAppRequest) returns (CreateBanAppResponse) {
        option (google.api.http) = {
            post: "/v1/create/ban/app"
            body: "*"
        };
    }
    rpc GetBanApp (GetBanAppRequest) returns (GetBanAppResponse) {
        option (google.api.http) = {
            post: "/v1/get/ban/app"
            body: "*"
        };
    }
    rpc GetBanAppByApp (GetBanAppByAppRequest) returns (GetBanAppByAppResponse) {
        option (google.api.http) = {
            post: "/v1/get/ban/app/by/app"
            body: "*"
        };
    }
    rpc UpdateBanApp (UpdateBanAppRequest) returns (UpdateBanAppResponse) {
        option (google.api.http) = {
            post: "/v1/update/ban/app"
            body: "*"
        };
    }
    rpc DeleteBanApp (DeleteBanAppRequest) returns (DeleteBanAppResponse) {
        option (google.api.http) = {
            post: "/v1/delete/ban/app"
            body: "*"
        };
    }

    rpc GetAppInfo (GetAppInfoRequest) returns (GetAppInfoResponse) {
        option (google.api.http) = {
            post: "/v1/get/appinfo"
            body: "*"
        };
    }
    rpc GetAppInfos (GetAppInfosRequest) returns (GetAppInfosResponse) {
        option (google.api.http) = {
            post: "/v1/get/appinfos"
            body: "*"
        };
    }
    rpc GetAppInfosByCreator (GetAppInfosByCreatorRequest) returns (GetAppInfosByCreatorResponse) {
        option (google.api.http) = {
            post: "/v1/get/appinfos/by/creator"
            body: "*"
        };
    }

    rpc CreateAppUser (CreateAppUserRequest) returns (CreateAppUserResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/user"
            body: "*"
        };
    }
    rpc GetAppUser (GetAppUserRequest) returns (GetAppUserResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/user"
            body: "*"
        };
    }
    rpc GetAppUsersByApp (GetAppUsersByAppRequest) returns (GetAppUsersByAppResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/users/by/app"
            body: "*"
        };
    }
    rpc UpdateAppUser (UpdateAppUserRequest) returns (UpdateAppUserResponse) {
        option (google.api.http) = {
            post: "/v1/update/app/user"
            body: "*"
        };
    }
    rpc CreateAppUserSecret (CreateAppUserSecretRequest) returns (CreateAppUserSecretResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/user/secret"
            body: "*"
        };
    }
    rpc GetAppUserSecret (GetAppUserSecretRequest) returns (GetAppUserSecretResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/user/secret"
            body: "*"
        };
    }
    rpc GetAppUserSecretByApp (GetAppUserSecretByAppRequest) returns (GetAppUserSecretByAppResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/user/secret/by/app"
            body: "*"
        };
    }
    rpc UpdateAppUserSecret (UpdateAppUserSecretRequest) returns (UpdateAppUserSecretResponse) {
        option (google.api.http) = {
            post: "/v1/update/app/user/secret"
            body: "*"
        };
    }
    rpc CreateAppUserExtra (CreateAppUserExtraRequest) returns (CreateAppUserExtraResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/user/extra"
            body: "*"
        };
    }
    rpc UpdateAppUserExtra (UpdateAppUserExtraRequest) returns (UpdateAppUserExtraResponse) {
        option (google.api.http) = {
            post: "/v1/update/app/user/extra"
            body: "*"
        };
    }
    rpc CreateBanAppUser (CreateBanAppUserRequest) returns (CreateBanAppUserResponse) {
        option (google.api.http) = {
            post: "/v1/create/ban/app/user"
            body: "*"
        };
    }
    rpc DeleteBanAppUser (DeleteBanAppUserRequest) returns (DeleteBanAppUserResponse) {
        option (google.api.http) = {
            post: "/v1/delete/ban/app/user"
            body: "*"
        };
    }

    rpc CreateAppUserControl (CreateAppUserControlRequest) returns (CreateAppUserControlResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/user/control"
            body: "*"
        };
    }
    rpc UpdateAppUserControl (UpdateAppUserControlRequest) returns (UpdateAppUserControlResponse) {
        option (google.api.http) = {
            post: "/v1/update/app/user/control"
            body: "*"
        };
    }

    rpc CreateAppRole (CreateAppRoleRequest) returns (CreateAppRoleResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/role"
            body: "*"
        };
    }
    rpc UpdateAppRole (UpdateAppRoleRequest) returns (UpdateAppRoleResponse) {
        option (google.api.http) = {
            post: "/v1/update/app/role"
            body: "*"
        };
    }

    rpc CreateAppRoleUser (CreateAppRoleUserRequest) returns (CreateAppRoleUserResponse) {
        option (google.api.http) = {
            post: "/v1/create/app/role/user"
            body: "*"
        };
    }
    rpc DeleteAppRoleUser (DeleteAppRoleUserRequest) returns (DeleteAppRoleUserResponse) {
        option (google.api.http) = {
            post: "/v1/delete/app/role/user"
            body: "*"
        };
    }

    rpc GetAppUserInfo (GetAppUserInfoRequest) returns (GetAppUserInfoResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/userinfo"
            body: "*"
        };
    }
    rpc GetAppUserInfos (GetAppUserInfosRequest) returns (GetAppUserInfosResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/userinfos"
            body: "*"
        };
    }
    rpc GetAppUserInfosByApp (GetAppUserInfosByAppRequest) returns (GetAppUserInfosByAppResponse) {
        option (google.api.http) = {
            post: "/v1/get/app/userinfos/by/app"
            body: "*"
        };
    }
}

message App {
    string ID = 10;
    string CreatedBy = 20;
    string Name = 30;
    string Logo = 40;
    string Description = 50;
    uint32 CreateAt = 60;
}

message CreateAppRequest {
    App Info = 10;
}

message CreateAppResponse {
    App Info = 10;
}

message GetAppRequest {
    string ID = 10;
}

message GetAppResponse {
    App Info = 10;
}

message GetAppsRequest {
}

message GetAppsResponse {
    repeated App Infos = 10;
}

message GetAppsByCreatorRequest {
    string UserID = 10;
    npool.v1.PageInfo PageInfo = 20;
}

message GetAppsByCreatorResponse {
    repeated App Infos = 10;
    uint32 Total = 20;
}

message UpdateAppRequest {
    App Info = 10;
}

message UpdateAppResponse {
    App Info = 10;
}

message AppControl {
    string ID = 10;
    string AppID = 20;
    // Signup method always be signin method
    repeated string SignupMethods = 30;
    repeated string ExternSigninMethods = 40;
    string RecaptchaMethod = 50;
    bool KycEnable = 60;
    bool SigninVerifyEnable = 70;
}

message CreateAppControlRequest {
    AppControl Info = 10;
}

message CreateAppControlResponse {
    AppControl Info = 10;
}

message GetAppControlRequest {
    string ID = 10;
}

message GetAppControlResponse {
    AppControl Info = 10;
}

message GetAppControlByAppRequest {
    string AppID = 10;
}

message GetAppControlByAppResponse {
    AppControl Info = 10;
}

message UpdateAppControlRequest {
    AppControl Info = 10;
}

message UpdateAppControlResponse {
    AppControl Info = 10;
}

message BanApp {
    string ID = 10;
    string AppID = 20;
    string Message = 30;
}

message CreateBanAppRequest {
    BanApp Info = 10;
}

message CreateBanAppResponse {
    BanApp Info = 10;
}

message GetBanAppRequest {
    string ID = 10;
}

message GetBanAppResponse {
    BanApp Info = 10;
}

message GetBanAppByAppRequest {
    string AppID = 10;
}

message GetBanAppByAppResponse {
    BanApp Info = 10;
}

message UpdateBanAppRequest {
    BanApp Info = 10;
}

message UpdateBanAppResponse {
    BanApp Info = 10;
}

message DeleteBanAppRequest {
    string ID = 10;
}

message DeleteBanAppResponse {
    BanApp Info = 10;
}

message AppInfo {
    App App = 10;
    AppControl Ctrl = 20;
    BanApp Ban = 30;
}

message GetAppInfoRequest {
    string ID = 10;
}

message GetAppInfoResponse {
    AppInfo Info = 10;
}

message GetAppInfosRequest {
    npool.v1.PageInfo PageInfo = 10;
}

message GetAppInfosResponse {
    repeated AppInfo Infos = 10;
    uint32 Total = 20;
}

message GetAppInfosByCreatorRequest {
    string UserID = 10;
    npool.v1.PageInfo PageInfo = 20;
}

message GetAppInfosByCreatorResponse {
    repeated AppInfo Infos = 10;
    uint32 Total = 20;
}

message AppUser {
    string ID = 10;
    string AppID = 20;
    string EmailAddress = 30;
    string PhoneNO = 40;
    string ImportFromApp = 50;
    uint32 CreateAt = 60;
}

message CreateAppUserRequest {
    AppUser Info = 10;
}

message CreateAppUserResponse {
    AppUser Info = 10;
}

message GetAppUserRequest {
    string ID = 10;
}

message GetAppUserResponse {
    AppUser Info = 10;
}

message GetAppUsersByAppRequest {
    string AppID = 10;
    npool.v1.PageInfo PageInfo = 20;
}

message GetAppUsersByAppResponse {
    repeated AppUser Infos = 10;
}

message UpdateAppUserRequest {
    AppUser Info = 10;
}

message UpdateAppUserResponse {
    AppUser Info = 10;
}

message AppUserSecret {
    string ID = 10;
    string AppID = 20;
    string UserID = 30;
    string PasswordHash = 40;
    string Salt = 50;
    string GoogleSecret = 60;
}

message CreateAppUserSecretRequest {
    AppUserSecret Info = 10;
}

message CreateAppUserSecretResponse {
    AppUserSecret Info = 10;
}

message GetAppUserSecretRequest {
    string ID = 10;
}

message GetAppUserSecretResponse {
    AppUserSecret Info = 10;
}

message GetAppUserSecretByAppRequest {
    string AppID = 10;
}

message GetAppUserSecretByAppResponse {
    AppUserSecret Info = 10;
}

message UpdateAppUserSecretRequest {
    AppUserSecret Info = 10;
}

message UpdateAppUserSecretResponse {
    AppUserSecret Info = 10;
}

message AppUserExtra {
    string ID = 10;
    string AppID = 20;
    string UserID = 30;
    string Username = 40;
    repeated string AddressFields = 50;
    string Gender = 60;
    string PostalCode = 70;
    uint32 Age = 80;
    uint32 Birthday = 90;
    string Avatar = 100;
    string Organization = 110;
}

message CreateAppUserExtraRequest {
    AppUserExtra Info = 10;
}

message CreateAppUserExtraResponse {
    AppUserExtra Info = 10;
}

message UpdateAppUserExtraRequest {
    AppUserExtra Info = 10;
}

message UpdateAppUserExtraResponse {
    AppUserExtra Info = 10;
}

message BanAppUser {
    string ID = 10;
    string AppID = 20;
    string UserID = 30;
    string Message = 40;
}

message CreateBanAppUserRequest {
    BanAppUser Info = 10;
}

message CreateBanAppUserResponse {
    BanAppUser Info = 10;
}

message DeleteBanAppUserRequest {
    BanAppUser Info = 10;
}

message DeleteBanAppUserResponse {
    BanAppUser Info = 10;
}

message AppUserControl {
    string ID = 10;
}

message CreateAppUserControlRequest {
    AppUserControl Info = 10;
}

message CreateAppUserControlResponse {
    AppUserControl Info = 10;
}

message UpdateAppUserControlRequest {
    AppUserControl Info = 10;
}

message UpdateAppUserControlResponse {
    AppUserControl Info = 10;
}

message AppRole {
    string ID = 10;
    string AppID = 20;
    string CreatedBy = 30;
    string Role = 40;
    string Description = 50;
    bool Default = 60;
}

message CreateAppRoleRequest {
    AppRole Info = 10;
}

message CreateAppRoleResponse {
    AppRole Info = 10;
}

message UpdateAppRoleRequest {
    AppRole Info = 10;
}

message UpdateAppRoleResponse {
    AppRole Info = 10;
}

message AppRoleUser {
    string ID = 10;
    string AppID = 20;
    string RoleID = 30;
    string UserID = 40;
}

message CreateAppRoleUserRequest {
    AppRoleUser Info = 10;
}

message CreateAppRoleUserResponse {
    AppRoleUser Info = 10;
}

message DeleteAppRoleUserRequest {
    AppRoleUser Info = 10;
}

message DeleteAppRoleUserResponse {
    AppRoleUser Info = 10;
}

message AppUserInfo {
    AppUser User = 10;
    AppUserExtra Extra = 20;
    AppUserControl Ctrl = 30;
    BanAppUser Ban = 40;
    repeated AppRole Roles = 50;
}

message GetAppUserInfoRequest {
    string ID = 10;
}

message GetAppUserInfoResponse {
    AppUserInfo Info = 10;
}

message GetAppUserInfosRequest {
    npool.v1.PageInfo PageInfo = 10;
}

message GetAppUserInfosResponse {
    repeated AppUserInfo Infos = 10;
    uint32 Total = 20;
}

message GetAppUserInfosByAppRequest {
    string AppID = 10;
    npool.v1.PageInfo PageInfo = 20;
}

message GetAppUserInfosByAppResponse {
    repeated AppUserInfo Infos = 10;
    uint32 Total = 20;
}

