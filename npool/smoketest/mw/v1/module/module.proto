syntax = "proto3";

package smoketest.middleware.module.v1;

option go_package = "github.com/NpoolPlatform/message/npool/smoketest/mw/v1/module";

import "npool/smoketest/mgr/v1/module/module.proto";

// Service Name
service Middleware {
    rpc CreateModule        (CreateModuleRequest)       returns (CreateModuleResponse)       {}
    rpc UpdateModule        (UpdateModuleRequest)       returns (UpdateModuleResponse)       {}
    rpc GetModules          (GetModulesRequest)         returns (GetModulesResponse)         {}
    rpc GetModule           (GetModuleRequest)          returns (GetModuleResponse)           {}
    rpc DeleteModule        (DeleteModuleRequest)       returns (DeleteModuleResponse)       {}
}

message Module {
    // @inject_tag: sql:"id"
    string          ID                                                = 10;
    // @inject_tag: sql:"name"
    string          Name                                              = 20;
    // @inject_tag: sql:"description"
    string          Description                                       = 30;
    // @inject_tag: sql:"created_at"
    uint32          CreatedAt                                         = 40;
    // @inject_tag: sql:"updated_at"
    uint32          UpdatedAt                                         = 50;
}


message CreateModuleRequest {
    string              Name                                           = 10;
    optional string     Description                                    = 20;
}

message CreateModuleResponse {
    Module  Info  = 10;
}

message DeleteModuleRequest {
    string ID        = 10;
}

message DeleteModuleResponse {
    Module Info = 10;
}

message GetModulesRequest {
    smoketest.manager.module.v1.Conds Conds = 10;
    optional int32  Offset                  = 20;
    optional int32  Limit                   = 30;
}

message GetModulesResponse {
    repeated Module Infos   = 10;
    uint32          Total   = 20;
}

message GetModuleRequest {
    string ID = 10;
}

message GetModuleResponse {
    Module Info = 10;
}

message UpdateModuleRequest {
    string             ID                                                = 10;
    optional string    Name                                              = 20;
    optional string    Description                                       = 30;
}

message UpdateModuleResponse {
    Module Info = 10;
}