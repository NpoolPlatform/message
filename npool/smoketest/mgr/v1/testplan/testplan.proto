syntax = "proto3";

package smoketest.manager.testplan.v1;

option go_package = "github.com/NpoolPlatform/message/npool/smoketest/mgr/v1/testplan";

import "npool/npool.proto";

// Service Name
service Manager {}

enum TestResultState {
    DefaultTestResultState = 0;
    Passed                 = 10;
    Failed                 = 20;
}

enum TestPlanState {
    DefaultTestPlanState      = 0;
    WaitStart                 = 10;
    InProgress                = 20;
    Finished                  = 30;
    Overdue                   = 40;
}

message TestPlan {
    // @inject_tag: sql:"id"
    string          ID                                = 10;
    // @inject_tag: sql:"name"
    string          Name                              = 20;
    // @inject_tag: sql:"state"
    TestPlanState   State                             = 30; 
    string          StateStr                          = 40; 
    // @inject_tag: sql:"created_by"
    string          CreatedBy                         = 50;
    // @inject_tag: sql:"executor"
    string          Executor                          = 60;
    // @inject_tag: sql:"fails"
    uint32          Fails                             = 70;
    // @inject_tag: sql:"passes"
    uint32          Passes                            = 80;
    // @inject_tag: sql:"skips"
    uint32          Skips                             = 90;
    // @inject_tag: sql:"run_duration"
    uint32          RunDuration                       = 100;
    // @inject_tag: sql:"result"
    TestResultState Result                            = 110;
    string          ResultStr                         = 120;
    // @inject_tag: sql:"deadline"
    uint32          Deadline                          = 130;
    // @inject_tag: sql:"created_at"
    uint32          CreatedAt                         = 140;
    // @inject_tag: sql:"updated_at"
    uint32          UpdatedAt                         = 150;
    // @inject_tag: sql:"deleted_at"
    uint32          DeletedAt                         = 160;
}

message TestPlanReq {
    optional string          ID                                = 10;
    optional string          Name                              = 20;
    optional TestPlanState   State                             = 30; 
    optional string          CreatedBy                         = 40;
    optional string          Executor                          = 50;
    optional uint32          Fails                             = 60;
    optional uint32          Passes                            = 70;
    optional uint32          Skips                             = 80;
    optional uint32          RunDuration                       = 90;
    optional TestResultState Result                            = 100;
    optional uint32          Deadline                          = 110;
}

message Conds {
    optional npool.v1.StringVal      ID                         = 10;
    optional npool.v1.StringVal      State                      = 20;
    optional npool.v1.StringVal      CreatedBy                  = 30;
    optional npool.v1.StringVal      Executor                   = 40;
}

