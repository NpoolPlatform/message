syntax = "proto3";

package smoketest.gateway.relatedtestcase.v1;

option go_package = "github.com/NpoolPlatform/message/npool/smoketest/gw/v1/relatedtestcase";

import "npool/smoketest/mgr/v1/relatedtestcase/relatedtestcase.proto";
import "google/api/annotations.proto";

// Service Name
service Gateway {
    rpc GetRelatedTestCases (GetRelatedTestCasesRequest) returns (GetRelatedTestCasesResponse) {
        option (google.api.http) = {
            post: "/v1/get/relatedtestcases"
            body: "*"
        };
    }

    rpc CreateRelatedTestCase (CreateRelatedTestCaseRequest) returns (CreateRelatedTestCaseResponse) {
        option (google.api.http) = {
            post: "/v1/create/relatedtestcase"
            body: "*"
        };
    }

    rpc UpdateRelatedTestCase (UpdateRelatedTestCaseRequest) returns (UpdateRelatedTestCaseResponse) {
        option (google.api.http) = {
            post: "/v1/update/relatedtestcase"
            body: "*"
        };
    }

    rpc DeleteRelatedTestCase (DeleteRelatedTestCaseRequest) returns (DeleteRelatedTestCaseResponse) {
        option (google.api.http) = {
            post: "/v1/delete/relatedtestcase"
            body: "*"
        };
    }
}

message RelatedTestCase {
    string          ID                                = 10;
    smoketest.manager.relatedtestcase.v1.CondType CondType     = 20; //条件类型:前置条件|后置条件
    string          TestCaseID                        = 30;
    string          TestCasePath                      = 40;
    string          TestCaseArguments                 = 50;
    string          RelatedTestCaseID                 = 60;
    string          RelatedTestCasePath               = 70;
    string          RelatedTestCaseArguments          = 80;
    string          ArgumentsTransfer                 = 90;
    uint32          index                             = 100;
    uint32          CreatedAt                         = 110;
}

message CreateRelatedTestCaseRequest {
    string          TestCaseID                        = 10;
    string          RelatedTestCaseID                 = 20;
    string          ArgumentsTransfer                 = 30;
    uint32          index                             = 40;
    smoketest.manager.relatedtestcase.v1.CondType CondType     = 50;
}

message CreateRelatedTestCaseResponse {
    RelatedTestCase Info = 10;
}

message DeleteRelatedTestCaseRequest {
    string ID        = 10;
}

message DeleteRelatedTestCaseResponse {
    RelatedTestCase Info = 10;
}

message GetRelatedTestCasesRequest {
    int32  Offset = 10;
    int32  Limit  = 20;
}

message GetRelatedTestCasesResponse {
    repeated RelatedTestCase Infos = 10;
    uint32        Total   = 20;
}

message UpdateRelatedTestCaseRequest {
    string          ID                                         = 10;
    smoketest.manager.relatedtestcase.v1.CondType CondType     = 20; 
    string          TestCaseID                                 = 30;
    string          RelatedTestCaseID                          = 40;
    string          ArgumentsTransfer                          = 50;
    uint32          index                                      = 60;
}

message UpdateRelatedTestCaseResponse {
    RelatedTestCase Info = 10;
}

